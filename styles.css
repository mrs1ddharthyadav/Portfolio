/* ---------- Base & Utilities ---------- */
:root{
  --bg:#0b0d10;
  --glass-strong: rgba(255,255,255,0.04);
  --glass-mid: rgba(255,255,255,0.03);
  --accent: linear-gradient(90deg,#6be4ff,#6a6aff);
  --muted: rgba(255,255,255,0.6);
  --card-shadow: 0 10px 30px rgba(0,0,0,0.6);
  --glass-border: rgba(255,255,255,0.06);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: radial-gradient(1200px 600px at 10% 10%, rgba(106,106,255,0.08), transparent),
              radial-gradient(1000px 500px at 90% 90%, rgba(107,228,255,0.03), transparent),
              var(--bg);
  color: #e9eef6;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding:48px;
  display:flex;
  flex-direction:column;
  gap:24px;
  min-height:100vh;
  /* ensure page content doesn't shift when loader-lock is toggled */
  transition: padding 150ms ease;
}

/* --- THEME TOKENS (prepend these to your existing styles.css) --- */
:root{
  --accent-a: #6be4ff;
  --accent-b: #6a6aff;
  --accent: linear-gradient(90deg,var(--accent-a),var(--accent-b));
  --hero-glow: #6a6aff;
  --bg: #071224;                /* Revert accidental bright value to dark default */
  --card-bg: rgba(255,255,255,0.02);
  --text-main: #eaf7ff;
  --muted: rgba(159,180,198,0.7);
  --font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --font-size-base: 16px;
  --font-size-heading: 22px;
  --scale: 1;
  --heading-color: var(--text-main);
  --subheading-color: var(--muted);
  --body-color: var(--text-main);
  --btn-text: #071224;
  --btn-bg: var(--accent-a);
}

/* Light theme override */
.light-mode{
  --bg:#f6f8fb;
  --text-main:#071224;
  --muted:rgba(0,0,0,0.6);
  --card-bg: rgba(0,0,0,0.03);
  --heading-color: var(--text-main);
  --subheading-color: var(--muted);
  --body-color: var(--text-main);
  --btn-text: #ffffff;
  --btn-bg: var(--accent-b);
}

/* Minimal mapping so existing classes pick tokens (non-invasive) */
body{ background:var(--bg); color:var(--text-main); font-family:var(--font-family); font-size:var(--font-size-base); transform:scale(var(--scale)); transform-origin:top center; }
.card{ background:var(--card-bg); }
h1, .name{ color:var(--heading-color); }
.subtitle, .muted{ color:var(--subheading-color); }
p, .mini, .muted, .lead{ color:var(--body-color); }
.btn.primary{ color:var(--btn-text) !important; background: var(--btn-bg) !important; border: none; }

/* --- End of prepend snippet --- */


/* Header */
.site-header{
  position: relative;
  z-index: 9999; /* ensures nav is always clickable */
  width:100%;
  max-width:1100px;
  margin:0 auto;
  border-radius:16px;
  padding:10px 14px;
}
.header-inner{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.brand{display:flex;align-items:center;gap:12px}
.brand-text{line-height:1}
.brand-name{font-weight:700}
.brand-sub{font-size:12px;color:var(--muted)}
.nav{display:flex;gap:12px;align-items:center}
.nav-link{color:var(--muted);text-decoration:none;font-weight:600}
.btn.small{padding:8px 10px;border-radius:10px;font-size:13px}

#dayNightBtn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border-radius: 10px;
  padding: 6px 12px;
  backdrop-filter: blur(10px);
}


/* ---------- Layout ---------- */
.container{
  width:100%;
  max-width:1100px;
  margin:0 auto;
  display:grid;
  grid-template-columns: 1fr 380px;
  gap:28px;
  align-items:start;
}

/* ---------- Glass panel base ---------- */
.glass{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid var(--glass-border);
  border-radius:16px;
  padding:20px;
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  box-shadow: var(--card-shadow);
}

/* ---------- Hero (left column) ---------- */
.hero{
  padding:36px;
  border-radius:20px;
  position:relative;
  overflow:visible;
}
.hero-grid{
  display:flex;
  gap:20px;
  align-items:center;
}

/* avatar */
.avatar{
  min-width:92px;
  min-height:92px;
  border-radius:999px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:28px;
  letter-spacing:0.6px;
  color:#eaf7ff;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.06);
  box-shadow: 0 6px 18px rgba(106,106,255,0.08), inset 0 -6px 16px rgba(0,0,0,0.25);
  position:relative;
  overflow:hidden;
}
.avatar.small{min-width:42px;min-height:42px;font-size:14px;padding:6px}
.avatar::after{
  content:'';
  position:absolute;
  inset:0;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

.name-title{display:flex;flex-direction:column}
.name{font-size:20px;font-weight:700;letter-spacing:0.2px;margin-bottom:6px}
.muted{color:var(--muted)}
.subtitle{color:var(--muted);font-size:13px}
.tagline{margin-top:18px;font-size:15px;color:#dfe9f8}

/* CTAs */
.cta-row{margin-top:18px;display:flex;gap:12px;align-items:center}
.btn{padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));color:#eaf7ff;font-weight:600;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;gap:8px;transition: transform .18s ease, box-shadow .18s}
.btn:hover{ transform: translateY(-4px); box-shadow: 0 10px 30px rgba(106,106,255,0.06)}
.btn.primary{background: var(--accent);background-size:200% 200%;border:none;color:var(--btn-text);box-shadow: 0 10px 30px rgba(106,106,255,0.18)}

/* small meta */
.meta{margin-top:18px;color:var(--muted);font-size:13px}

/* ---------- Cards (skills / projects) ---------- */
.cards{margin-top:26px;display:grid;gap:14px}
.card{padding:14px;border-radius:12px;display:flex;gap:12px;align-items:center;border:1px solid rgba(255,255,255,0.03);background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01))}
.skill-list{display:flex;flex-wrap:wrap;gap:10px}
.skill-pill{padding:8px 10px;border-radius:999px;font-weight:600;font-size:13px;background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03)}

/* projects grid */
.projects-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}
.project{padding:14px;border-radius:12px;position:relative;overflow:hidden;transition: transform .22s ease, box-shadow .22s}
.project:hover{ transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.6)}
.project .coming{font-size:13px;color:var(--muted)}
.project .title{font-weight:700;margin-top:8px}

/* right column */
.side{position:sticky;top:48px;height:fit-content;display:flex;flex-direction:column;gap:14px}
.contact-form label{display:block;font-size:13px;margin-bottom:6px;color:var(--muted)}
.contact-form input, .contact-form textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color: #eaf7ff;resize:vertical}
.contact-actions{display:flex;gap:10px;margin-top:10px}

/* footer */
.site-footer{width:100%;max-width:1100px;margin:0 auto;border-radius:16px;padding:12px 14px}
.footer-inner{display:flex;justify-content:space-between;align-items:center;gap:12px}
.footer-left{color:var(--muted)}
.footer-right{display:flex;gap:12px;align-items:center}

/* floating glow behind hero for premium depth */
.hero::before{
  content:'';
  position:absolute;
  width:420px;height:420px;
  right:-120px;top:-80px;
  background: radial-gradient(closest-side, rgba(106,106,255,0.12), transparent);
  filter: blur(40px);
  z-index:0;
  transform:translateZ(0);
}

/* responsive base */
@media (max-width:980px){
  .container{grid-template-columns: 1fr; padding:0}
  body{padding:20px}
  .side{position:static}
  .header-inner{flex-direction:column;gap:10px;align-items:flex-start}
  .nav{width:100%;justify-content:space-between}
}

/* subtle floating animation for cards */
@keyframes floaty {
  0% { transform: translateY(0px) }
  50% { transform: translateY(-6px) }
  100% { transform: translateY(0px) }
}
.avatar, .card, .project { animation: floaty 6s ease-in-out infinite; animation-delay: calc(var(--i,0) * 0.15s) }

/* ---- Small token-based mappings (paste near the end of styles.css) ---- */

/* Avatar (brand initials like "SY") */
.brand .avatar,
.avatar.large {
  /* avatar text color controlled by --heading-color */
  color: var(--heading-color) !important;
}

/* Main name / headings */
.brand .brand-name,
.h1,
.name,
.title {
  color: var(--heading-color) !important;
}

/* Taglines and subtle text inside hero */
.hero .muted,
.hero .small,
.tagline {
  color: var(--subheading-color) !important;
}

/* CTA buttons & normal buttons text color (keeps btn background as-is) */
.hero .btn,
.cta-row .btn,
.btn {
  color: var(--btn-text) !important;
}

/* Ensure links / small text in header / footer are visible */
a.mini, .mini {
  color: var(--subheading-color) !important;
}

/* Inputs and card borders already use tokens; ensure admin area uses body token */
.admin-sidebar, .admin-main, .card, .glass {
  color: var(--body-color) !important;
  border-color: var(--card-border) !important;
}

/* ---------- Fix: visible borders & pills in light mode ---------- */

/* Base pill style (keeps dark look but works in light mode too) */
.skill-pill {
  display: inline-block;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 13px;
  line-height: 1;
  background: transparent;                 /* let token decide */
  color: var(--body-color);
  border: 1px solid var(--card-border);
  box-shadow: 0 1px 0 rgba(0,0,0,0.03) inset;
}

/* Card containers (cards, projects) should show token border & bg */
.card,
.project,
.projects-grid .project {
  background: var(--card-bg) !important;
  border: 1px solid var(--card-border) !important;
  border-radius: 10px;
}

/* In light-mode, add a subtle outer shadow and slightly stronger border so edges read */
.light-mode .card,
.light-mode .project,
.light-mode .projects-grid .project {
  box-shadow: 0 6px 18px rgba(10,10,10,0.04);
  border: 1px solid var(--card-border);
}

/* Make sure the pills in the card also look crisp on light bg */
.light-mode .skill-pill {
  background: transparent; /* keeps it clean */
  border: 1px solid var(--card-border);
  color: var(--body-color);
  box-shadow: none;
}

/* If you used a different class name for pills, also cover common variants */
.pill, .tag, .skill-tag { 
  border: 1px solid var(--card-border);
  background: transparent;
  color: var(--body-color);
}

/* Ensure header / hero small text and avatar contrast */
.light-mode .brand .avatar,
.light-mode .avatar.large {
  background: var(--card-bg) !important;
  border: 1px solid var(--card-border) !important;
  color: var(--heading-color) !important;
}

#themeToggleBtn,
#themeToggleBtn span {
  color: #ffffff !important;
}

/* ---------- Accessibility / contrast fixes (paste at end of styles.css) ---------- */

/* Ensure card/project borders are always visible and use token */
.card,
.project,
.site-header,
.site-footer,
.projects-grid .project,
.admin-sidebar,
.admin-main,
.glass {
  border-color: var(--card-border) !important;
  background: var(--card-bg) !important;
}

/* Inputs / selects / textareas: clear border in light mode */
input, textarea, select, .input {
  border: 1px solid var(--control-border) !important;
  background: transparent !important;
  color: var(--body-color) !important;
}

/* Buttons: enforce readable border/contrast */
.btn {
  border: 1px solid var(--control-border) !important;
  color: var(--btn-text) !important;
  background: var(--btn-bg) !important;
}

/* ---------- Fullscreen loader (force cover & lock) ---------- */
/* This replaces the earlier loader block and forces the loader to genuinely cover any viewport */
.page-loader {
  position: fixed !important;
  inset: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 99999 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  background: rgba(7,18,36,0.82) !important; /* semitransparent overlay to hide page */
  color: var(--text-main) !important;
  transition: opacity 360ms ease, visibility 360ms ease !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
}

/* inner card */
.page-loader .loader-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
  padding: 22px;
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid var(--card-border);
  box-shadow: 0 8px 30px rgba(0,0,0,0.45);
  transform: translateZ(0);
}

/* loader avatar overrides */
.loader-avatar {
  min-width: 110px;
  min-height: 110px;
  width: 110px;
  height: 110px;
  font-size: 36px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius: 999px;
  border: 1px solid var(--card-border);
  box-shadow: 0 8px 20px rgba(0,0,0,0.35), inset 0 -6px 16px rgba(0,0,0,0.15);
  background: var(--card-bg);
  color: var(--heading-color);
}

/* jump animation */
@keyframes loader-jump {
  0%   { transform: translateY(0); }
  40%  { transform: translateY(-12px); }
  60%  { transform: translateY(-8px); }
  100% { transform: translateY(0); }
}

/* apply animation to avatar */
.loader-avatar {
  animation: loader-jump 1.2s cubic-bezier(.2,.8,.2,1) infinite;
}

/* text */
.loader-title {
  font-weight:700;
  font-size:18px;
  color: var(--heading-color);
  text-align:center;
}
.loader-sub {
  font-size:13px;
  color: var(--subheading-color);
  text-align:center;
}

/* hide animation when user prefers reduced motion */
@media (prefers-reduced-motion: reduce) {
  .loader-avatar { animation: none; transform: none; }
}

/* prevent page scroll while loader is active */
html.loading, body.loading {
  overflow: hidden !important;
  height: 100vh !important;
}

/* fade-out state (JS will add .hidden to trigger) */
.page-loader.hidden {
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

/* mobile sizing */
@media (max-width:480px) {
  .loader-avatar { width:88px; height:88px; font-size:28px; min-width:88px; min-height:88px; }
  .loader-inner { padding:16px; gap:10px; }
  .loader-title { font-size:16px; }
}

/* ---------- Tablet breakpoints & tweaks (paste near end of styles.css) ---------- */

/* 1) Large tablets / small laptops — keep 2 columns but slim the sidebar */
@media (max-width:1200px) and (min-width:981px) {
  .container {
    grid-template-columns: 1fr 320px; /* narrower sidebar, keeps 2-col layout readable */
    gap: 20px;
  }
  .site-header { padding: 10px 12px; max-width: calc(100% - 24px); } /* less horizontal padding */
  .hero { padding: 28px; }
  .avatar { min-width:72px; min-height:72px; font-size:20px; } /* slightly smaller avatar */
  .brand .brand-name { font-size:16px; }
  .nav-link { padding: 6px 8px; } /* tighter nav items */
  .projects-grid { gap:12px; }
}

/* 2) Narrow tablets (980px and below) — stack to single column but keep nice spacing */
@media (max-width:980px) and (min-width:821px) {
  .container {
    grid-template-columns: 1fr; /* stack */
    gap: 18px;
  }
  .site-header { padding: 10px; }
  .header-inner { align-items:center; gap:12px; }
  /* nav hidden on small viewports */
  .nav { display: none; }
  /* allow script to display hamburger */
  #mobileHamburger { display:inline-flex; } 
  .hero { padding: 20px; }
  .avatar { min-width:64px; min-height:64px; font-size:18px; margin-bottom:6px; }
  .side { position: static; } /* remove sticky behaviour so content flows naturally */
  .card, .project { margin-bottom:12px; }
  .projects-grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
  .btn, .btn.small { font-size:14px; padding:10px 12px; min-height:40px; }
}

/* 3) Small tablets / large phones (820px and below) */
@media (max-width:820px) {
  .container { grid-template-columns: 1fr; gap:14px; }
  .hero { padding:18px; }
  .avatar { min-width:56px; min-height:56px; font-size:16px; }
  .brand .brand-name { font-size:18px; }
  .side { order: 2; } /* put contact / side content below hero on narrow screens */
  .hero { order: 1; }
  .site-footer { padding:12px; }
  .header-inner { flex-direction:row; justify-content:space-between; align-items:center }
  .nav { position: absolute; right:12px; top:62px; max-width:320px; } /* mobile menu panel when open */
}

/* 4) tiny phones: final polish */
@media (max-width:420px) {
  body { padding: 12px; }
  .hero { padding:14px; }
  .loader-avatar, .avatar { min-width:48px; min-height:48px; font-size:14px; }
  .brand .brand-name { font-size:16px; }
  .btn { padding:10px 12px; font-size:14px; min-height:44px; }
}


/* ---------- Mobile / tablet header & nav fixes (<=980px) ---------- */

/* Keep header inner row-based and space-between so brand is left and controls are right */
@media (max-width:980px) {
  .header-inner {
    display:flex;
    flex-direction:row;
    justify-content:space-between;
    align-items:center;
    gap:12px;
  }

  /* Brand stays left */
  .brand { order: 1; display:flex; align-items:center; gap:12px; }

  /* Place hamburger to the far right */
  #mobileHamburger {
    display: inline-flex;            /* visible only on <=980px */
    order: 3;
    position: relative;              /* inside header */
    align-items: center;
    justify-content: center;
    min-width:44px;
    min-height:44px;
    border-radius:10px;
    padding:6px 10px;
    background: var(--btn-bg);
    color: var(--btn-text);
    box-shadow: 0 6px 18px rgba(0,0,0,0.25);
    z-index: 10005;
  }

  /* Hide the desktop nav; it will be shown when header.nav-open is active */
  .nav {
    display: none;
    position: absolute;
    right: 14px;
    top: calc(100% + 12px);
    width: min(320px, calc(100% - 36px));
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    border-radius: 10px;
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    box-shadow: 0 8px 30px rgba(0,0,0,0.4);
    z-index: 10000;
  }

  /* Visible nav when header is toggled open */
  .site-header.nav-open .nav {
    display: flex;
  }

  /* Make nav links stack and be easy to tap */
  .site-header .nav .nav-link {
    display:block;
    padding:10px 12px;
    border-radius:8px;
    width:100%;
    text-align:left;
  }

  /* Ensure the logo/avatar stays on the left visually */
  .site-header .brand { margin-right: auto; }

  /* Remove any centering that put the hamburger under the brand */
  .header-inner > * { align-self: center; }
}

/* Hide hamburger on larger screens (prevent the stray bar at >980px) */
@media (min-width:981px) {
  #mobileHamburger { display: none !important; }
}


/* ---- Force-hide desktop nav on <=980px and pin hamburger right ---- */
@media (max-width:980px) {
  .header-inner {
    display:flex !important;
    flex-direction:row !important;
    justify-content:space-between !important;
    align-items:center !important;
  }

  /* desktop nav must be hidden unless nav-open */
  .site-header .nav {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }

  /* show nav only when header has nav-open */
  .site-header.nav-open .nav {
    display: flex !important;
    visibility: visible !important;
    pointer-events: auto !important;
    position: absolute;
    right: 14px;
    top: calc(100% + 12px);
    width: min(320px, calc(100% - 36px));
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    border-radius: 10px;
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    z-index: 10000;
  }

  /* place brand left, nav middle (hidden), hamburger right */
  .brand { order: 1; margin-right: auto; }
  .site-header .nav { order: 2; }
  #mobileHamburger { order: 3; display:inline-flex !important; z-index:10005; }

  /* ensure nav links are tap-friendly when opened */
  .site-header .nav .nav-link {
    display:block; padding:10px 12px; border-radius:8px; width:100%; text-align:left;
  }
}

/* ensure the hamburger is hidden at >980px */
@media (min-width:981px) {
  #mobileHamburger { display: none !important; }
}


/* STRICT: mobile nav visible when header.nav-open (forces override) */
@media (max-width:980px) {
  .site-header .nav {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }

  .site-header.nav-open .nav {
    display: flex !important;
    visibility: visible !important;
    pointer-events: auto !important;
    position: absolute !important;
    right: 14px !important;
    top: calc(100% + 12px) !important;
    width: min(320px, calc(100% - 36px)) !important;
    flex-direction: column !important;
    gap: 8px !important;
    padding: 12px !important;
    border-radius: 10px !important;
    background: var(--card-bg) !important;
    border: 1px solid var(--card-border) !important;
    box-shadow: 0 8px 30px rgba(0,0,0,0.45) !important;
    z-index: 10050 !important;
  }

  .site-header.nav-open .nav .nav-link {
    display:block !important;
    padding:10px 12px !important;
    width:100% !important;
    text-align:left !important;
    color: var(--body-color) !important;
  }
}

/* ---------- Force centered site wrapper on tablets/phones (<=981px) ---------- */
/* Keeps layout centered and avoids left-clinging content */
@media (max-width:981px) {
  .site-header, .container, .site-footer {
    max-width: 1100px !important;
    margin-left: auto !important;
    margin-right: auto !important;
    padding-left: 16px !important;
    padding-right: 16px !important;
    box-sizing: border-box;
    width: 100%;
  }

  /* Reset body padding so container padding determines gutters */
  body {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* Make sure hero centers within container */
  .hero {
    margin-left: auto !important;
    margin-right: auto !important;
  }

  /* Remove sticky side column so content flows centered */
  .side { position: static !important; width: 100% !important; }

  /* Prevent content from hugging the left edge */
  .header-inner {
    display:flex !important;
    flex-direction:row !important;
    justify-content:space-between !important;
    align-items:center !important;
    gap: 12px;
  }

  /* small sizing tweaks to avoid overflow */
  .avatar { min-width:56px !important; min-height:56px !important; }
  .projects-grid { gap: 12px !important; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)) !important; }
}

/* Centered nav panel under header for small viewports */
@media (max-width:980px) {
  .site-header.nav-open .nav {
    left: 50% !important;
    transform: translateX(-50%) !important;
    right: auto !important;
    width: min(360px, 92vw) !important;
    top: calc(100% + 10px) !important;
    box-shadow: 0 12px 40px rgba(0,0,0,0.45) !important;
    z-index: 10060 !important;
  }
}

/* ---------- Accessibility / reduced-motion polish ---------- */
@media (prefers-reduced-motion: reduce) {
  .avatar, .card, .project, .loader-avatar { animation: none !important; transition: none !important; }
}

/* ---------- End of file ---------- */


/* ========== NAV PANEL: opaque, centered, above all ========== */
@media (max-width:980px) {
  /* strong opaque panel so page does not show through */
  .site-header.nav-open .nav {
    background: color-mix(in srgb, var(--card-bg) 96%, rgba(0,0,0,0.85)); /* opaque panel */
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    border: 1px solid color-mix(in srgb, var(--card-border) 90%, rgba(0,0,0,0.6));
    box-shadow: 0 20px 60px rgba(0,0,0,0.6);
    z-index: 11000 !important; /* sit above header and overlay */
    left: 50% !important;
    right: auto !important;
    transform: translateX(-50%) !important;
    width: min(360px, 92vw) !important;
    padding: 16px !important;
    pointer-events: auto !important;
    opacity: 1 !important;
  }

  /* nav link visual clarity */
  .site-header.nav-open .nav .nav-link {
    color: var(--heading-color) !important;
    background: transparent !important;
  }

  /* ensure header isn't translucent over the nav */
  .site-header { z-index: 10990; }
}

/* ========== LOADER STRONG OVERRIDE ========== */
/* Force the loader overlay to cover everything and hide page content */
.page-loader {
  background: rgba(7,18,36,0.94) !important; /* darker so nothing shows */
  z-index: 12000 !important; /* above nav & header */
}

/* visually hide page content while loader is present (but keep it in DOM for screen readers unless aria-hidden added via JS) */
html.loading .site-header,
html.loading main,
html.loading .site-footer {
  opacity: 0.06 !important;
  pointer-events: none !important;
  user-select: none !important;
  filter: blur(2px) !important;
  transition: opacity 180ms ease, filter 180ms ease;
}

/* keep loader inner crisp (no bleed) */
.page-loader .loader-inner { background: rgba(10,12,16,0.9) !important; }

/* ensure nav is not semi-transparent when opened */
.site-header.nav-open .nav { background-color: rgba(8,10,14,0.96) !important; }

/* ---------- MOBILE: tighter header gutters, remove left gap ---------- */
html, body { width:100%; overflow-x: hidden; } /* prevent accidental horizontal scroll */

@media (max-width:420px) {
  /* Keep global page padding small and consistent */
  body {
    padding-left: 12px !important;
    padding-right: 12px !important;
  }

  /* Make header use nearly full viewport with small symmetric margins */
  .site-header {
    max-width: calc(100% - 24px) !important; /* 12px margins each side */
    margin-left: 12px !important;
    margin-right: 12px !important;
    padding: 10px 12px !important;
    border-radius: 12px !important; /* slightly smaller radius for small screens */
    box-shadow: 0 6px 20px rgba(0,0,0,0.45);
  }

  /* keep header-inner tight and horizontally aligned */
  .header-inner {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 8px !important;
  }

  /* shrink brand text slightly so it doesn't wrap weirdly */
  .brand .brand-name { font-size: 15px !important; line-height:1.05 !important; }
  .brand .brand-sub { font-size: 11px !important; opacity:0.9; }

  /* hamburger: ensure it's flush to the right and vertically centered */
  #mobileHamburger {
    margin-left: 8px !important;
    margin-right: 0 !important;
    min-width:44px !important;
    min-height:44px !important;
    align-self:center !important;
    position: relative !important;
    right: 0 !important;
  }

  /* keep nav hidden until opened, but when opened it should not shift layout */
  .site-header .nav { display: none !important; visibility: hidden !important; pointer-events: none !important; }
  .site-header.nav-open .nav {
    left: 50% !important;
    transform: translateX(-50%) !important;
    visibility: visible !important;
    display: flex !important;
    pointer-events: auto !important;
    width: min(360px, 92vw) !important;
  }

  /* container should align with header width (prevents hero from being offset) */
  .container {
    max-width: calc(100% - 24px) !important;
    margin-left: 12px !important;
    margin-right: 12px !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* avoid the hero glow or other absolute elements causing horizontal overflow */
  .hero::before { right: -80px !important; } /* reduce horizontal bleed on tiny screens */
}

/* small tweak for slightly larger phones / small tablets */
@media (min-width:421px) and (max-width:580px) {
  body { padding-left: 14px !important; padding-right: 14px !important; }
  .site-header { max-width: calc(100% - 28px) !important; margin: 0 auto; padding: 10px 14px !important; border-radius:14px; }
  .container { max-width: calc(100% - 28px) !important; margin-left:auto; margin-right:auto; }
}

/* ---------- Small-screen safety net (<=500px) ---------- */
html, body {
  width: 100%;
  overflow-x: hidden; /* prevents accidental horizontal scroll */
}

/* Tighter global gutters on small screens */
@media (max-width:500px) {
  body {
    padding-left: 12px !important;
    padding-right: 12px !important;
  }

  /* Container and header match same gutters so edges align */
  .site-header,
  .container,
  .site-footer {
    max-width: calc(100% - 24px) !important;
    margin-left: 12px !important;
    margin-right: 12px !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    box-sizing: border-box !important;
  }

  /* Make header slightly more compact */
  .site-header {
    padding: 10px 12px !important;
    border-radius: 12px !important;
  }

  /* Keep header-inner in one row and avoid wrapping that pushes layout */
  .header-inner {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 8px !important;
  }

  /* Brand sizing to avoid accidental wraps */
  .brand .brand-name {
    font-size: 15px !important;
    line-height: 1.05 !important;
  }
  .brand .brand-sub { font-size: 11px !important; opacity: .9; }

  /* Hamburger pinned to right */
  #mobileHamburger {
    margin-left: 8px !important;
    margin-right: 0 !important;
    min-width: 44px !important;
    min-height: 44px !important;
  }

  /* Hero: reduce padding and force internal stacking so it never exceeds container */
  .hero {
    padding: 18px !important;
    border-radius: 16px !important;
  }
  .hero-grid { gap: 12px !important; align-items: flex-start !important; }

  /* Avatar and CTAs scale down/stack to avoid overflow */
  .avatar { min-width: 48px !important; min-height: 48px !important; font-size: 14px !important; }
  .cta-row { flex-wrap: wrap !important; gap: 10px !important; }
  .cta-row .btn { flex: 1 1 auto !important; min-width: 0 !important; }

  /* Prevent hero glow from causing horizontal overflow */
  .hero::before { right: -40px !important; width: 320px !important; }

  /* Project grid: smaller cards that wrap nicely */
  .projects-grid {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)) !important;
    gap: 10px !important;
  }

  /* Cards: reduce padding so they fit */
  .card, .project { padding: 12px !important; }

  /* Reduce left/right bleed from any absolute elements */
  .site-header, .container, .hero { overflow: visible; -webkit-overflow-scrolling: touch; }

  /* Nav panel: keep centered and full width cap */
  .site-header.nav-open .nav {
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: calc(100% - 28px) !important;
    max-width: 420px !important;
    padding: 12px !important;
  }

  /* Reduce shadow & clipping on small screens */
  .site-header, .hero, .card {
    box-shadow: 0 8px 22px rgba(0,0,0,0.5) !important;
  }
}

/* Extra safety for very tall/skinny viewports */
@media (max-width:420px) {
  .cta-row .btn { padding: 10px 12px !important; font-size: 14px !important; }
  .brand .brand-name { font-size: 14px !important; }
  .projects-grid { grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)) !important; }
}
